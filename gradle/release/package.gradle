windowsDistZip.dependsOn(downloadLicenses, downloadAndExtractWindowsJRE)

tasks.withType(Tar){
    compression = Compression.GZIP
    archiveExtension.set('tar.gz')
}

distZip {
    duplicatesStrategy = 'exclude'
}

task('packageAllDists').dependsOn('windowsDistZip')

task packageApp(dependsOn: ['packageAllDists',
                            'downloadLicenses',
                            'scriptsForRelease'], group: 'distribution') {
    tasks.findByName('packageAllDists').mustRunAfter('downloadLicenses')
    tasks.findByName('packageAllDists').mustRunAfter('scriptsForRelease')
}

task scriptsForRelease(type: Copy, group: 'distribution') {
    from "${rootDir}/src/main/bin"
    into "${rootDir}/build/bin"

    outputs.upToDateWhen { false } // Forces the task to rerun every time, without requiring a clean.
}
